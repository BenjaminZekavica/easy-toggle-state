/*! easy-toggle-state v1.4.2 | (c) 2018 Matthieu Bu√© <https://twikito.com> | MIT License | https://twikito.github.io/easy-toggle-state/ */
!function(){"use strict";var t;!Array.from&&(Array.from=[].slice.call),"function"!=typeof(t=window.Element.prototype).matches&&(t.matches=t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||function(t){for(var e=(this.document||this.ownerDocument).querySelectorAll(t),r=0;e[r]&&e[r]!==this;)++r;return Boolean(e[r])}),"function"!=typeof t.closest&&(t.closest=function(t){for(var e=this;e&&1===e.nodeType;){if(e.matches(t))return e;e=e.parentNode}return null});var e="toggle",r=function(t){return["data",e,t].filter(Boolean).join("-")},n=r("class"),i=r("escape"),o=r("event"),a=r("group"),c=r("is-active"),s=r("outside"),u=r("target"),l=r("target-all"),g=r("target-next"),f=r("target-only"),h=r("target-parent"),v=r("target-previous"),A=r("target-self"),d=r("state"),b=r("trigger-off"),m=function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t},E=function(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)},y=function(t){var e=t?"["+t+"]":"";return[].concat(E(document.querySelectorAll(("["+n+"]"+e).trim())))},p=function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(m(e={},"aria-checked",t.isToggleActive),m(e,"aria-expanded",t.isToggleActive),m(e,"aria-hidden",!t.isToggleActive),m(e,"aria-selected",t.isToggleActive),e);Object.keys(r).forEach(function(e){return t.hasAttribute(e)&&t.setAttribute(e,r[e])})},T=function(t){return y(a+'="'+t+'"').filter(function(t){return t.isToggleActive})},L=function(t,e){0===e.length&&console.warn("There's no match for the selector '"+t+"' for this trigger");var r=t.match(/#\w+/gi);return r&&r.forEach(function(t){var r=[].concat(E(e)).filter(function(e){return e.id===t.slice(1)});r.length>1&&console.warn("There's "+r.length+" matches for the selector '"+t+"' for this trigger")}),e},w=function(t){if(t.hasAttribute(u)||t.hasAttribute(l)){var e=t.getAttribute(u)||t.getAttribute(l);return L(e,document.querySelectorAll(e))}if(t.hasAttribute(h)){var r=t.getAttribute(h);return L(r,t.parentElement.querySelectorAll(r))}if(t.hasAttribute(A)){var n=t.getAttribute(A);return L(n,t.querySelectorAll(n))}return t.hasAttribute(v)?L("previous",[t.previousElementSibling].filter(Boolean)):t.hasAttribute(g)?L("next",[t.nextElementSibling].filter(Boolean)):[]},k=function t(e){var r=e.target;r.closest("["+d+'="true"]')||(y(s).forEach(function(t){t!=r&&t.isToggleActive&&(t.hasAttribute(a)?O:x)(t)}),r.hasAttribute(s)&&r.isToggleActive&&document.addEventListener(r.getAttribute(o)||"click",t,!1))},S=function(t){x(t.target.targetElement)},q=function(t,e){t.isToggleActive=!t.isToggleActive,p(t),e.hasAttribute(s)&&t.setAttribute(d,e.isToggleActive);var r=t.querySelectorAll("["+b+"]");r.length>0&&(e.isToggleActive?r.forEach(function(t){t.targetElement=e,t.addEventListener("click",S,!1)}):r.forEach(function(t){t.removeEventListener("click",S,!1)}))},x=function(t){var e=t.getAttribute(n)||"is-active";t.isToggleActive=!t.isToggleActive,p(t),t.hasAttribute(f)||t.classList.toggle(e);for(var r=w(t),i=0;i<r.length;i++)r[i].classList.toggle(e),q(r[i],t);M(t)},M=function(t){t.hasAttribute(s)&&(t.hasAttribute(a)?console.warn("You can't use '"+s+"' on a grouped trigger"):t.isToggleActive?document.addEventListener(t.getAttribute(o)||"click",k,!1):document.removeEventListener(t.getAttribute(o)||"click",k,!1))},O=function(t){var e=T(t.getAttribute(a));e.length>0?-1===e.indexOf(t)&&(e.forEach(function(t){x(t)}),x(t)):x(t)},B=function(t){var e,r=t.getAttribute(n)||"is-active";t.isToggleActive=!0,p(t,(m(e={},"aria-checked",!0),m(e,"aria-expanded",!0),m(e,"aria-hidden",!1),m(e,"aria-selected",!0),e)),t.hasAttribute(f)||t.classList.contains(r)||t.classList.add(r);for(var i=w(t),o=0;o<i.length;o++)i[o].classList.contains(r)||i[o].classList.add(r),q(i[o],t);M(t)},D=function(){y(c).forEach(function(t){if(t.hasAttribute(a)){var e=t.getAttribute(a);T(e).length>0?console.warn("Toggle group '"+e+"' must not have more than one trigger with '"+c+"'"):B(t)}else B(t)}),y().forEach(function(t){t.addEventListener(t.getAttribute(o)||"click",function(e){e.preventDefault(),(t.hasAttribute(a)?O:x)(t)},!1)});var t=y(i);t.length>0&&document.addEventListener("keyup",function(e){("key"in(e=e||window.event)?"Escape"===e.key||"Esc"===e.key:27===e.keyCode)&&t.forEach(function(t){t.isToggleActive&&(t.hasAttribute(a)?console.warn("You can't use '"+i+"' on a grouped trigger"):x(t))})},!1)};document.addEventListener("DOMContentLoaded",function t(){D(),document.removeEventListener("DOMContentLoaded",t)}),window.initEasyToggleState=D}();
