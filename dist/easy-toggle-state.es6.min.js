/*! easy-toggle-state v1.5.1 | (c) 2018 Matthieu Bu√© <https://twikito.com> | MIT License | https://twikito.github.io/easy-toggle-state/ */
!function(){"use strict";const t="toggle",e=e=>["data",t,e].filter(Boolean).join("-"),i=e("class"),r=e("escape"),s=e("event"),o=e("group"),n=e("is-active"),a=e("outside"),c=e("target"),g=e("target-all"),l=e("target-next"),u=e("target-only"),A=e("target-parent"),h=e("target-previous"),d=e("target-self"),v=e("state"),b=e("trigger-off"),f=(t,e)=>{const r=t?`[${t}]`:"";return e?[...e.querySelectorAll(r)]:[...document.querySelectorAll(`[${i}]${r}`.trim())]},E=(t,e={"aria-checked":t.isToggleActive,"aria-expanded":t.isToggleActive,"aria-hidden":!t.isToggleActive,"aria-selected":t.isToggleActive})=>{Object.keys(e).forEach(i=>t.hasAttribute(i)&&t.setAttribute(i,e[i]))},m=t=>f(`${o}="${t}"`).filter(t=>t.isToggleActive),T=(t,e)=>{0===e.length&&console.warn(`There's no match for the selector '${t}' for this trigger`);const i=t.match(/#\w+/gi);return i&&i.forEach(t=>{const i=[...e].filter(e=>e.id===t.slice(1));i.length>1&&console.warn(`There's ${i.length} matches for the selector '${t}' for this trigger`)}),e},L=t=>{if(t.hasAttribute(c)||t.hasAttribute(g)){const e=t.getAttribute(c)||t.getAttribute(g);return T(e,document.querySelectorAll(e))}if(t.hasAttribute(A)){const e=t.getAttribute(A);return T(e,t.parentElement.querySelectorAll(e))}if(t.hasAttribute(d)){const e=t.getAttribute(d);return T(e,t.querySelectorAll(e))}return t.hasAttribute(h)?T("previous",[t.previousElementSibling].filter(Boolean)):t.hasAttribute(l)?T("next",[t.nextElementSibling].filter(Boolean)):[]},p=t=>{const e=t.target;e.closest("["+v+'="true"]')||(f(a).forEach(t=>{t!==e&&t.isToggleActive&&(t.hasAttribute(o)?S:w)(t)}),e.hasAttribute(a)&&e.isToggleActive&&document.addEventListener(e.getAttribute(s)||"click",p,!1))},k=t=>{w(t.target.targetElement)},$=(t,e)=>{t.isToggleActive=!t.isToggleActive,E(t),e.hasAttribute(a)&&t.setAttribute(v,e.isToggleActive);const i=f(b,t);i.length>0&&(e.isToggleActive?i.forEach(t=>{t.targetElement=e,t.addEventListener("click",k,!1)}):i.forEach(t=>{t.removeEventListener("click",k,!1)}))},w=t=>{const e=t.getAttribute(i)||"is-active";t.isToggleActive=!t.isToggleActive,E(t),t.hasAttribute(u)||t.classList.toggle(e);const r=L(t);for(let i=0;i<r.length;i++)r[i].classList.toggle(e),$(r[i],t);y(t)},y=t=>{t.hasAttribute(a)&&(t.hasAttribute(o)?console.warn(`You can't use '${a}' on a grouped trigger`):t.isToggleActive?document.addEventListener(t.getAttribute(s)||"click",p,!1):document.removeEventListener(t.getAttribute(s)||"click",p,!1))},S=t=>{const e=m(t.getAttribute(o));e.length>0?-1===e.indexOf(t)&&(e.forEach(w),w(t)):w(t)},x=t=>{const e=t.getAttribute(i)||"is-active";t.isToggleActive=!0,E(t,{"aria-checked":!0,"aria-expanded":!0,"aria-hidden":!1,"aria-selected":!0}),t.hasAttribute(u)||t.classList.contains(e)||t.classList.add(e);const r=L(t);for(let i=0;i<r.length;i++)r[i].classList.contains(e)||r[i].classList.add(e),$(r[i],t);y(t)},q=()=>{f(n).forEach(t=>{if(t.hasAttribute(o)){const e=t.getAttribute(o);m(e).length>0?console.warn(`Toggle group '${e}' must not have more than one trigger with '${n}'`):x(t)}else x(t)}),f().forEach(t=>{t.addEventListener(t.getAttribute(s)||"click",e=>{e.preventDefault(),(t.hasAttribute(o)?S:w)(t)},!1)});const t=f(r);t.length>0&&document.addEventListener("keyup",e=>{"Escape"!==(e=e||window.event).key&&"Esc"!==e.key||t.forEach(t=>{t.isToggleActive&&(t.hasAttribute(o)?console.warn(`You can't use '${r}' on a grouped trigger`):w(t))})},!1)},O=()=>{q(),document.removeEventListener("DOMContentLoaded",O)};document.addEventListener("DOMContentLoaded",O),window.initEasyToggleState=q}();
