/*! easy-toggle-state v1.4.2 | (c) 2018 Matthieu Bu√© <https://twikito.com> | MIT License | https://twikito.github.io/easy-toggle-state/ */
!function(){"use strict";const e="toggle",t=t=>["data",e,t].filter(Boolean).join("-"),i=t("class"),r=t("escape"),l=t("event"),s=t("group"),a=t("is-active"),o=t("outside"),n=t("target"),g=t("target-all"),c=t("target-next"),u=t("target-only"),A=t("target-parent"),h=t("target-previous"),d=t("target-self"),v=t("state"),b=t("trigger-off"),f=(e,t)=>{const r=e?`[${e}]`:"";return t?[...t.querySelectorAll(r)]:[...document.querySelectorAll(`[${i}]${r}`.trim())]},E=(e,t={"aria-checked":e.isToggleActive,"aria-expanded":e.isToggleActive,"aria-hidden":!e.isToggleActive,"aria-selected":e.isToggleActive})=>{Object.keys(t).forEach(i=>e.hasAttribute(i)&&e.setAttribute(i,t[i]))},m=e=>f(`${s}="${e}"`).filter(e=>e.isToggleActive),T=(e,t)=>{0===t.length&&console.warn(`There's no match for the selector '${e}' for this trigger`);const i=e.match(/#\w+/gi);return i&&i.forEach(e=>{let i=[...t].filter(t=>t.id===e.slice(1));i.length>1&&console.warn(`There's ${i.length} matches for the selector '${e}' for this trigger`)}),t},L=e=>{if(e.hasAttribute(n)||e.hasAttribute(g)){let t=e.getAttribute(n)||e.getAttribute(g);return T(t,document.querySelectorAll(t))}if(e.hasAttribute(A)){let t=e.getAttribute(A);return T(t,e.parentElement.querySelectorAll(t))}if(e.hasAttribute(d)){let t=e.getAttribute(d);return T(t,e.querySelectorAll(t))}return e.hasAttribute(h)?T("previous",[e.previousElementSibling].filter(Boolean)):e.hasAttribute(c)?T("next",[e.nextElementSibling].filter(Boolean)):[]},p=e=>{let t=e.target;t.closest("["+v+'="true"]')||(f(o).forEach(e=>{e!=t&&e.isToggleActive&&(e.hasAttribute(s)?S:$)(e)}),t.hasAttribute(o)&&t.isToggleActive&&document.addEventListener(t.getAttribute(l)||"click",p,!1))},k=e=>{$(e.target.targetElement)},y=(e,t)=>{e.isToggleActive=!e.isToggleActive,E(e),t.hasAttribute(o)&&e.setAttribute(v,t.isToggleActive);let i=f(b,e);i.length>0&&(t.isToggleActive?i.forEach(e=>{e.targetElement=t,e.addEventListener("click",k,!1)}):i.forEach(e=>{e.removeEventListener("click",k,!1)}))},$=e=>{let t=e.getAttribute(i)||"is-active";e.isToggleActive=!e.isToggleActive,E(e),e.hasAttribute(u)||e.classList.toggle(t);let r=L(e);for(let i=0;i<r.length;i++)r[i].classList.toggle(t),y(r[i],e);w(e)},w=e=>{e.hasAttribute(o)&&(e.hasAttribute(s)?console.warn(`You can't use '${o}' on a grouped trigger`):e.isToggleActive?document.addEventListener(e.getAttribute(l)||"click",p,!1):document.removeEventListener(e.getAttribute(l)||"click",p,!1))},S=e=>{let t=m(e.getAttribute(s));t.length>0?-1===t.indexOf(e)&&(t.forEach(e=>{$(e)}),$(e)):$(e)},x=e=>{let t=e.getAttribute(i)||"is-active";e.isToggleActive=!0,E(e,{"aria-checked":!0,"aria-expanded":!0,"aria-hidden":!1,"aria-selected":!0}),e.hasAttribute(u)||e.classList.contains(t)||e.classList.add(t);let r=L(e);for(let i=0;i<r.length;i++)r[i].classList.contains(t)||r[i].classList.add(t),y(r[i],e);w(e)},q=()=>{f(a).forEach(e=>{if(e.hasAttribute(s)){let t=e.getAttribute(s);m(t).length>0?console.warn(`Toggle group '${t}' must not have more than one trigger with '${a}'`):x(e)}else x(e)}),f().forEach(e=>{e.addEventListener(e.getAttribute(l)||"click",t=>{t.preventDefault(),(e.hasAttribute(s)?S:$)(e)},!1)});let e=f(r);e.length>0&&document.addEventListener("keyup",t=>{let i=!1;(i="key"in(t=t||window.event)?"Escape"===t.key||"Esc"===t.key:27===t.keyCode)&&e.forEach(e=>{e.isToggleActive&&(e.hasAttribute(s)?console.warn(`You can't use '${r}' on a grouped trigger`):$(e))})},!1)},O=()=>{q(),document.removeEventListener("DOMContentLoaded",O)};document.addEventListener("DOMContentLoaded",O),window.initEasyToggleState=q}();
