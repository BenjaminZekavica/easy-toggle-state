!function(){"use strict";const t=t=>"data-toggle-"+t,e={CLASS:t("class"),TARGET_ALL:t("target-all"),TARGET_PARENT:t("target-parent"),TARGET_SELF:t("target-self"),IS_ACTIVE:t("is-active"),GROUP:t("group"),EVENT:t("event"),OUTSIDE:t("outside"),TARGET_ONLY:t("target-only"),ESCAPE:t("escape"),TRIGGER_OFF:t("trigger-off"),TARGET_STATE:t("state"),EXPANDED:"aria-expanded",SELECTED:"aria-selected"},i=t=>{const i=t?`[${t}]`:"";return[...document.querySelectorAll(`[${e.CLASS}]${i}`.trim())]},E=t=>{let E=[];return i(`${e.GROUP}="${t}"`).forEach(t=>{t.isToggleActive&&E.push(t)}),E},r=t=>t.hasAttribute(e.TARGET_ALL)?document.querySelectorAll(t.getAttribute(e.TARGET_ALL)):t.hasAttribute(e.TARGET_PARENT)?t.parentElement.querySelectorAll(t.getAttribute(e.TARGET_PARENT)):t.hasAttribute(e.TARGET_SELF)?t.querySelectorAll(t.getAttribute(e.TARGET_SELF)):[],A=t=>{let E=t.target;E.closest("["+e.TARGET_STATE+'="true"]')||(i(e.OUTSIDE).forEach(t=>{if(t!=E&&t.isToggleActive){(t.hasAttribute(e.GROUP)?T:l)(t)}}),E.hasAttribute(e.OUTSIDE)&&E.isToggleActive&&document.addEventListener(E.getAttribute(e.EVENT)||"click",A,!1))},s=t=>{l(t.target.targetElement)},a=(t,i)=>{i.hasAttribute(e.OUTSIDE)&&t.setAttribute(e.TARGET_STATE,i.isToggleActive);let E=t.querySelectorAll("["+e.TRIGGER_OFF+"]");E.length>0&&(i.isToggleActive?E.forEach(t=>{t.targetElement=i,t.addEventListener("click",s,!1)}):E.forEach(t=>{t.removeEventListener("click",s,!1)}))},l=t=>{let i=t.getAttribute(e.CLASS)||"is-active";t.isToggleActive=!t.isToggleActive,t.hasAttribute(e.TARGET_ONLY)||t.classList.toggle(i),t.hasAttribute(e.EXPANDED)&&t.setAttribute(e.EXPANDED,t.isToggleActive),t.hasAttribute(e.SELECTED)&&t.setAttribute(e.SELECTED,t.isToggleActive);let E=r(t);for(let e=0;e<E.length;e++)E[e].classList.toggle(i),a(E[e],t);o(t)},o=t=>{t.hasAttribute(e.OUTSIDE)&&(t.hasAttribute(e.GROUP)?console.warn(`You can't use '${e.OUTSIDE}' on a grouped trigger`):t.isToggleActive?document.addEventListener(t.getAttribute(e.EVENT)||"click",A,!1):document.removeEventListener(t.getAttribute(e.EVENT)||"click",A,!1))},T=t=>{let i=E(t.getAttribute(e.GROUP));i.length>0?-1===i.indexOf(t)&&(i.forEach(t=>{l(t)}),l(t)):l(t)},n=t=>{t.isToggleActive=!0;let i=t.getAttribute(e.CLASS)||"is-active";t.hasAttribute(e.TARGET_ONLY)||t.classList.contains(i)||t.classList.add(i),t.hasAttribute(e.EXPANDED)&&t.getAttribute(e.EXPANDED)&&t.setAttribute(e.EXPANDED,!0),t.hasAttribute(e.SELECTED)&&!t.getAttribute(e.SELECTED)&&t.setAttribute(e.SELECTED,!0);let E=r(t);for(let e=0;e<E.length;e++)E[e].classList.contains(i)||E[e].classList.add(i),a(E[e],t);o(t)},g=()=>{i(e.IS_ACTIVE).forEach(t=>{if(t.hasAttribute(e.GROUP)){let i=t.getAttribute(e.GROUP);E(i).length>0?console.warn(`Toggle group '${i}' must not have more than one trigger with '${e.IS_ACTIVE}'`):n(t)}else n(t)}),i().forEach(t=>{t.addEventListener(t.getAttribute(e.EVENT)||"click",i=>{i.preventDefault(),(t.hasAttribute(e.GROUP)?T:l)(t)},!1)});let t=i(e.ESCAPE);t.length>0&&document.addEventListener("keyup",i=>{let E=!1;(E="key"in(i=i||window.event)?"Escape"===i.key||"Esc"===i.key:27===i.keyCode)&&t.forEach(t=>{t.isToggleActive&&(t.hasAttribute(e.GROUP)?console.warn(`You can't use '${e.ESCAPE}' on a grouped trigger`):l(t))})},!1)},c=()=>{g(),document.removeEventListener("DOMContentLoaded",c)};document.addEventListener("DOMContentLoaded",c),window.initEasyToggleState=g}();
