/*! easy-toggle-state v1.4.1 | (c) 2018 Matthieu Bu√© <https://twikito.com> | MIT License | https://twikito.github.io/easy-toggle-state/ */
!function(){"use strict";var t="toggle",e=function(e){return["data",t,e].filter(Boolean).join("-")},r="aria-checked",i=e("class"),n=e("escape"),o=e("event"),a="aria-expanded",u=e("group"),s="aria-hidden",c=e("is-active"),g=e("outside"),l="aria-selected",A=e("target"),f=e("target-all"),h=e("target-next"),v=e("target-only"),b=e("target-parent"),d=e("target-previous"),E=e("target-self"),m=e("state"),T=e("trigger-off"),L=function(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)},y=function(t){var e=t?"["+t+"]":"";return[].concat(L(document.querySelectorAll(("["+i+"]"+e).trim())))},p=function(t){return y(u+'="'+t+'"').filter(function(t){return t.isToggleActive})},k=function(t,e){0===e.length&&console.warn("There's no match for the selector '"+t+"' for this trigger");var r=t.match(/#\w+/gi);return r&&r.forEach(function(t){var r=[].concat(L(e)).filter(function(e){return e.id===t.slice(1)});r.length>1&&console.warn("There's "+r.length+" matches for the selector '"+t+"' for this trigger")}),e},w=function(t){if(t.hasAttribute(A)||t.hasAttribute(f)){var e=t.getAttribute(A)||t.getAttribute(f);return k(e,document.querySelectorAll(e))}if(t.hasAttribute(b)){var r=t.getAttribute(b);return k(r,t.parentElement.querySelectorAll(r))}if(t.hasAttribute(E)){var i=t.getAttribute(E);return k(i,t.querySelectorAll(i))}return t.hasAttribute(d)?k("previous",[t.previousElementSibling].filter(Boolean)):t.hasAttribute(h)?k("next",[t.nextElementSibling].filter(Boolean)):[]},S=function t(e){var r=e.target;r.closest("["+m+'="true"]')||(y(g).forEach(function(t){t!=r&&t.isToggleActive&&(t.hasAttribute(u)?O:C)(t)}),r.hasAttribute(g)&&r.isToggleActive&&document.addEventListener(r.getAttribute(o)||"click",t,!1))},q=function(t){C(t.target.targetElement)},x=function(t){t.hasAttribute(r)&&t.setAttribute(r,t.isToggleActive),t.hasAttribute(a)&&t.setAttribute(a,t.isToggleActive),t.hasAttribute(s)&&t.setAttribute(s,!t.isToggleActive),t.hasAttribute(l)&&t.setAttribute(l,t.isToggleActive)},B=function(t,e){t.isToggleActive=!t.isToggleActive,x(t),e.hasAttribute(g)&&t.setAttribute(m,e.isToggleActive);var r=t.querySelectorAll("["+T+"]");r.length>0&&(e.isToggleActive?r.forEach(function(t){t.targetElement=e,t.addEventListener("click",q,!1)}):r.forEach(function(t){t.removeEventListener("click",q,!1)}))},C=function(t){var e=t.getAttribute(i)||"is-active";t.isToggleActive=!t.isToggleActive,x(t),t.hasAttribute(v)||t.classList.toggle(e);for(var r=w(t),n=0;n<r.length;n++)r[n].classList.toggle(e),B(r[n],t);D(t)},D=function(t){t.hasAttribute(g)&&(t.hasAttribute(u)?console.warn("You can't use '"+g+"' on a grouped trigger"):t.isToggleActive?document.addEventListener(t.getAttribute(o)||"click",S,!1):document.removeEventListener(t.getAttribute(o)||"click",S,!1))},O=function(t){var e=p(t.getAttribute(u));e.length>0?-1===e.indexOf(t)&&(e.forEach(function(t){C(t)}),C(t)):C(t)},M=function(t){t.isToggleActive=!0;var e=t.getAttribute(i)||"is-active";t.hasAttribute(v)||t.classList.contains(e)||t.classList.add(e),t.hasAttribute(r)&&t.getAttribute(r)&&t.setAttribute(r,!0),t.hasAttribute(a)&&t.getAttribute(a)&&t.setAttribute(a,!0),t.hasAttribute(s)&&t.getAttribute(s)&&t.setAttribute(s,!1),t.hasAttribute(l)&&!t.getAttribute(l)&&t.setAttribute(l,!0);for(var n=w(t),o=0;o<n.length;o++)n[o].classList.contains(e)||n[o].classList.add(e),B(n[o],t);D(t)},Y=function(){y(c).forEach(function(t){if(t.hasAttribute(u)){var e=t.getAttribute(u);p(e).length>0?console.warn("Toggle group '"+e+"' must not have more than one trigger with '"+c+"'"):M(t)}else M(t)}),y().forEach(function(t){t.addEventListener(t.getAttribute(o)||"click",function(e){e.preventDefault(),(t.hasAttribute(u)?O:C)(t)},!1)});var t=y(n);t.length>0&&document.addEventListener("keyup",function(e){("key"in(e=e||window.event)?"Escape"===e.key||"Esc"===e.key:27===e.keyCode)&&t.forEach(function(t){t.isToggleActive&&(t.hasAttribute(u)?console.warn("You can't use '"+n+"' on a grouped trigger"):C(t))})},!1)};document.addEventListener("DOMContentLoaded",function t(){Y(),document.removeEventListener("DOMContentLoaded",t)}),window.initEasyToggleState=Y}();
